!

!
version 17.12
service timestamps debug datetime msec
service timestamps log datetime msec
!
hostname P2
!
boot-start-marker
boot-end-marker
!
!
vrf definition clab-mgmt
 description clab-mgmt
 !
 address-family ipv4
 exit-address-family
 !
 address-family ipv6
 exit-address-family
!
no aaa new-model
!
!
!
!
!
!
!
!
!
!
!
!
!
no ip domain lookup
ip domain name lab
ip cef
login on-success log
ipv6 unicast-routing
ipv6 cef
!
!
!
!
!
!
!
!
mpls label protocol ldp
multilink bundle-name authenticated
!
!
crypto pki trustpoint TP-self-signed-10
 enrollment selfsigned
 subject-name cn=IOS-Self-Signed-Certificate-10
 revocation-check none
 rsakeypair TP-self-signed-10
 hash sha256
!
!
crypto pki certificate chain TP-self-signed-10
 certificate self-signed 01
  30820320 30820208 A0030201 02020101 300D0609 2A864886 F70D0101 0B050030 
  29312730 25060355 04030C1E 494F532D 53656C66 2D536967 6E65642D 43657274 
  69666963 6174652D 3130301E 170D3235 30373239 32323030 32305A17 0D333530 
  37323932 32303032 305A3029 31273025 06035504 030C1E49 4F532D53 656C662D 
  5369676E 65642D43 65727469 66696361 74652D31 30308201 22300D06 092A8648 
  86F70D01 01010500 0382010F 00308201 0A028201 0100BBC9 FD7B9F20 8D15D725 
  D82D0F52 693FCD7B 116E8FC7 127FC9B1 71A549B9 6139436F A4B57A5F 96F5670D 
  ED880A54 D3A7E804 CBDDDF08 B9E40A13 E8F6F698 B360C349 1338D44E 28CB9B10 
  156981CD 32AB56E0 3605C4FC 6B6C0A52 6A6B42F4 13AFD06C DE3DCE2A 6056D35E 
  7F3D69D9 AA9C622D 472667A5 4D3D219E FEB4CC3C 45A6F53A 7F26AC8D 81F81936 
  844E7069 73DBAF1F 2CF86A78 0F8BB808 48E9C577 8D951024 1ADD3DAC EA9D30DC 
  464BF53B C8BE7381 665869A4 A6B6D699 72EF160B F6F39AE8 E0AF9F35 6AF8D583 
  02B2AAFD 9646C181 85372CE8 4822A48A CBE85040 1D43E8D4 85FF7110 C68D020B 
  27ABC198 F66ED88A 5544D24F 235675D3 381E1B83 98F10203 010001A3 53305130 
  1D060355 1D0E0416 0414F001 60039E9D 6D7B9772 5A303321 61DF6A4B 02B2301F 
  0603551D 23041830 168014F0 0160039E 9D6D7B97 725A3033 2161DF6A 4B02B230 
  0F060355 1D130101 FF040530 030101FF 300D0609 2A864886 F70D0101 0B050003 
  82010100 99466C62 D1BA77A8 57CC41C8 20DBBB73 AADC483F 1902D995 188F39D4 
  105DC288 38FD0569 3F15D839 480DA243 56E5DCC5 DE58A5B3 C346D89C B3F7D3BE 
  0CA86C9C 5E4D6DCB 74468DB9 7CA0AD4E C18B840E E3342792 7AA36AB7 1DC6CCC0 
  ED2D6416 BC71F9C9 6A13660D 5BBD2226 3EC9753B 0773AFAD 5E1D612B 522620F3 
  BC96C1B4 57916AA2 1F56E6E8 C434009F ACBA661D 49338B81 5254AE4B CE12CF2A 
  74E8B950 970FDDBF 30959000 D43296B3 7E8B84A8 255EDD61 F584BAD6 6D0B125D 
  CA38CC59 06DB71BC 95B72EDB 86B9F1ED CC7F6D01 715CCD6E F75E6C91 C573FFBF 
  D3E1C37F 78B7ABA4 64D96344 0EED7054 99AA9C73 1AA701B6 0A5819C8 3843FBAB 3B8D8FE2
  	quit
!
!
memory free low-watermark processor 55011
!
!
spanning-tree mode rapid-pvst
!
!
username admin privilege 15 secret 9 $9$YMji4T302rqlEk$8/V96ezzz3poG/aQH1pTF2x0ZamMDT2eP4s/PjDQbOk
!
!
!
!
!
! 
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
interface Loopback0
 description Protocol Loopback
 ip address 100.0.254.2 255.255.255.255
 ip ospf 1 area 0
 ipv6 address 2001:DB8:100:254::2/128
 ipv6 ospf 1 area 0
!
interface Ethernet0/0
 description MGMT ONLY INTERFACE
 vrf forwarding clab-mgmt
 ip address 192.168.220.3 255.255.255.0
 no cdp enable
!
interface Ethernet0/1
 description To P1-Ethernet0/1
 ip address 100.0.12.2 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 0
 ipv6 address 2001:DB8:100:12::2/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 0
!
interface Ethernet0/2
 description To P4-Ethernet0/2
 ip address 100.0.24.2 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 0
 ipv6 address 2001:DB8:100:24::2/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 0
!
interface Ethernet0/3
 description To RR1-Ethernet0/2
 ip address 100.0.102.1 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 10
 ipv6 address 2001:DB8:100:102::2/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 10
!
interface Ethernet1/0
 description To PE3-Ethernet0/1
 ip address 100.0.22.2 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 3
 ipv6 address 2001:DB8:100:22::2/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 3
!
interface Ethernet1/1
 no ip address
 shutdown
!
interface Ethernet1/2
 no ip address
 shutdown
!
interface Ethernet1/3
 no ip address
 shutdown
!
router ospf 1
 router-id 100.0.254.2
 passive-interface Loopback0
!
router bgp 65000
 bgp log-neighbor-changes
 no bgp default ipv4-unicast
 neighbor BACKBONE-RR-IPV4-PEERS peer-group
 neighbor BACKBONE-RR-IPV4-PEERS remote-as 65000
 neighbor BACKBONE-RR-IPV6-PEERS peer-group
 neighbor BACKBONE-RR-IPV6-PEERS remote-as 65000
 neighbor 2001:DB8:100:254::5 peer-group BACKBONE-RR-IPV6-PEERS
 neighbor 2001:DB8:100:254::5 description RR1_Loopback0
 neighbor 2001:DB8:100:254::5 update-source Loopback0
 neighbor 100.0.254.5 peer-group BACKBONE-RR-IPV4-PEERS
 neighbor 100.0.254.5 description RR1_Loopback0
 neighbor 100.0.254.5 update-source Loopback0
 !
 address-family ipv4
  neighbor BACKBONE-RR-IPV4-PEERS send-community both
  neighbor BACKBONE-RR-IPV4-PEERS route-map ALLOW_ALL_V4_IN in
  neighbor BACKBONE-RR-IPV4-PEERS route-map ALLOW_ALL_V4_OUT out
  neighbor 100.0.254.5 activate
 exit-address-family
 !
 address-family ipv6
  neighbor BACKBONE-RR-IPV6-PEERS send-community both
  neighbor BACKBONE-RR-IPV6-PEERS route-map ALLOW_ALL_V6_IN in
  neighbor BACKBONE-RR-IPV6-PEERS route-map ALLOW_ALL_V6_OUT out
  neighbor 2001:DB8:100:254::5 activate
 exit-address-family
!
ip forward-protocol nd
!
!
ip http server
ip http secure-server
ip route vrf clab-mgmt 0.0.0.0 0.0.0.0 Ethernet0/0 192.168.220.1
ip ssh bulk-mode 131072
!
!
ip prefix-list ALLOW_ALL_IN_PREFIX seq 5 permit 0.0.0.0/0 le 32
!
ip prefix-list ALLOW_ALL_OUT_PREFIX seq 5 permit 0.0.0.0/0 le 32
ipv6 route vrf clab-mgmt ::/0 Ethernet0/0
ipv6 router ospf 1
 router-id 100.0.254.2
 passive-interface Loopback0
!
!
!
ipv6 prefix-list ALLOW_ALL_V6_IN_PREFIX seq 5 permit ::/0 le 128
!
ipv6 prefix-list ALLOW_ALL_V6_OUT_PREFIX seq 5 permit ::/0 le 128
route-map ALLOW_ALL_V6_IN permit 10 
 match ip address prefix-list ALLOW_ALL_V6_IN_PREFIX
!
route-map ALLOW_ALL_V6_OUT permit 10 
 match ip address prefix-list ALLOW_ALL_V6_OUT_PREFIX
!
route-map ALLOW_ALL_V4_OUT permit 10 
 match ip address prefix-list ALLOW_ALL_OUT_PREFIX
!
route-map ALLOW_ALL_V4_IN permit 10 
 match ip address prefix-list ALLOW_ALL_IN_PREFIX
!
mpls ldp router-id Loopback0 force
!
!
!
control-plane
!
!
!
line con 0
 logging synchronous
line aux 0
line vty 0 4
 login local
 transport input ssh
!
!
!
!
end