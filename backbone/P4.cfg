!
version 17.12
service timestamps debug datetime msec
service timestamps log datetime msec
!
hostname P4
!
boot-start-marker
boot-end-marker
!
!
vrf definition clab-mgmt
 description clab-mgmt
 !
 address-family ipv4
 exit-address-family
 !
 address-family ipv6
 exit-address-family
!
no aaa new-model
!
!
!
!
!
!
!
!
!
!
!
!
!
no ip domain lookup
ip domain name lab
ip cef
login on-success log
ipv6 unicast-routing
ipv6 cef
!
!
!
!
!
!
!
!
mpls label protocol ldp
multilink bundle-name authenticated
!
!
crypto pki trustpoint TP-self-signed-12
 enrollment selfsigned
 subject-name cn=IOS-Self-Signed-Certificate-12
 revocation-check none
 rsakeypair TP-self-signed-12
 hash sha256
!
!
crypto pki certificate chain TP-self-signed-12
 certificate self-signed 01
  30820320 30820208 A0030201 02020101 300D0609 2A864886 F70D0101 0B050030 
  29312730 25060355 04030C1E 494F532D 53656C66 2D536967 6E65642D 43657274 
  69666963 6174652D 3132301E 170D3235 30373239 32323030 32305A17 0D333530 
  37323932 32303032 305A3029 31273025 06035504 030C1E49 4F532D53 656C662D 
  5369676E 65642D43 65727469 66696361 74652D31 32308201 22300D06 092A8648 
  86F70D01 01010500 0382010F 00308201 0A028201 0100BF3A C735A736 B87FFC34 
  1692538D C156AFA1 D1D7E3A5 D22D3CF6 AAD1D0E9 CA136B8E E3D20E52 CF119BA9 
  3D3F356C 450F4FA6 36EF8EBD C0166AB4 F136995E BD23BF57 E70E6EE3 65F31008 
  26CAFEBD C8E3CEB5 66AEF5AD 126C4BA8 E3111708 D3B8FD2C B48B39CB B4E4A93B 
  E18E6041 A1DB3CFA 9F6B0AC6 EF0229C5 958EE609 2E6B2C2D 27DBB67D 976F9291 
  F79EF9F3 B24D6A5B 13D3398E 0FEBC113 2FFEC7BF BF68A3BD 0673D4D0 B53BAD12 
  8E1730B5 20711F24 8AAD40D6 5768CA81 BF655E7F 80DB91A2 8512D597 A355347D 
  4788B5E2 FE4BC8C4 D06DDFF5 EE1DDB55 B32A1763 E3584F96 BBCFB7EA 6DDB7643 
  34475418 4F9CE6E1 74866B3C F0100837 D027F839 B4790203 010001A3 53305130 
  1D060355 1D0E0416 04148B89 5F5A8B62 B8575B85 E2EF91EC 2D5CBEFA D982301F 
  0603551D 23041830 1680148B 895F5A8B 62B8575B 85E2EF91 EC2D5CBE FAD98230 
  0F060355 1D130101 FF040530 030101FF 300D0609 2A864886 F70D0101 0B050003 
  82010100 38635771 B1573897 49E84075 22798620 40A2A61B 22433AC8 F17CD5AF 
  EFD742F8 B72AC134 87B8A607 2C807D9A 14DFD8E6 C4782939 24008082 E9E30A0B 
  0AD041EB 2A93D212 4161A8E6 7642572B 88F18488 6194794C 3CC9F81B 14205CF2 
  EA8AA057 3ABACFA0 D86AF229 119A54E5 FA06C1E4 4C5B46C0 3BDA88C4 E229E717 
  427A4572 01AE5B3F 2E4892BB B5E06960 8ACA196B FC631F1C E5D27794 45D6EB89 
  651D2526 20101191 D75BB407 340A793A DA3E4270 B5968FE0 2027C9BD 2A32F88E 
  EADA7CE2 ED3CC9CB A281DBCD 385EF343 F87B660E E24A87E7 5C5EE983 0DD77169 
  DEED0E5D 7EFB2355 37980004 4531F354 A52B2240 A6F6E145 BB88B90A 3C95EF83 26CD9318
  	quit
!
!
memory free low-watermark processor 55011
!
!
spanning-tree mode rapid-pvst
!
!
username admin privilege 15 secret 9 $9$YMji4T302rqlEk$8/V96ezzz3poG/aQH1pTF2x0ZamMDT2eP4s/PjDQbOk
!
!
!
!
!
! 
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
interface Loopback0
 description Protocol Loopback
 ip address 100.0.254.4 255.255.255.255
 ip ospf 1 area 0
 ipv6 address 2001:DB8:100:254::4/128
 ipv6 ospf 1 area 0
!
interface Ethernet0/0
 description MGMT ONLY INTERFACE
 vrf forwarding clab-mgmt
 ip address 192.168.220.5 255.255.255.0
 no cdp enable
!
interface Ethernet0/1
 description To P3-Ethernet0/1
 ip address 100.0.34.4 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 0
 ipv6 address 2001:DB8:100:34::4/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 0
!
interface Ethernet0/2
 description To P2-Ethernet0/2
 ip address 100.0.24.4 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 0
 ipv6 address 2001:DB8:100:24::4/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 0
!
interface Ethernet0/3
 description To PE2-Ethernet0/2
 ip address 100.0.42.4 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 2
 ipv6 address 2001:DB8:100:42::4/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 2
!
interface Ethernet1/0
 description To PE3-Ethernet0/2
 ip address 100.0.43.4 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 3
 ipv6 address 2001:DB8:100:43::4/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 3
!
interface Ethernet1/1
 no ip address
 shutdown
!
interface Ethernet1/2
 no ip address
 shutdown
!
interface Ethernet1/3
 no ip address
 shutdown
!
router ospf 1
 router-id 100.0.254.4
 passive-interface Loopback0
!
router bgp 65000
 bgp log-neighbor-changes
 no bgp default ipv4-unicast
 neighbor BACKBONE-RR-IPV4-PEERS peer-group
 neighbor BACKBONE-RR-IPV4-PEERS remote-as 65000
 neighbor BACKBONE-RR-IPV6-PEERS peer-group
 neighbor BACKBONE-RR-IPV6-PEERS remote-as 65000
 neighbor 2001:DB8:100:254::5 peer-group BACKBONE-RR-IPV6-PEERS
 neighbor 2001:DB8:100:254::5 description RR1_Loopback0
 neighbor 2001:DB8:100:254::5 update-source Loopback0
 neighbor 100.0.254.5 peer-group BACKBONE-RR-IPV4-PEERS
 neighbor 100.0.254.5 description RR1_Loopback0
 neighbor 100.0.254.5 update-source Loopback0
 !
 address-family ipv4
  neighbor BACKBONE-RR-IPV4-PEERS send-community both
  neighbor BACKBONE-RR-IPV4-PEERS route-map ALLOW_ALL_V4_IN in
  neighbor BACKBONE-RR-IPV4-PEERS route-map ALLOW_ALL_V4_OUT out
  neighbor 100.0.254.5 activate
 exit-address-family
 !
 address-family ipv6
  neighbor BACKBONE-RR-IPV6-PEERS send-community both
  neighbor BACKBONE-RR-IPV6-PEERS route-map ALLOW_ALL_V6_IN in
  neighbor BACKBONE-RR-IPV6-PEERS route-map ALLOW_ALL_V6_OUT out
  neighbor 2001:DB8:100:254::5 activate
 exit-address-family
!
ip forward-protocol nd
!
!
ip http server
ip http secure-server
ip route vrf clab-mgmt 0.0.0.0 0.0.0.0 Ethernet0/0 192.168.220.1
ip ssh bulk-mode 131072
!
!
ip prefix-list ALLOW_ALL_IN_PREFIX seq 5 permit 0.0.0.0/0 le 32
!
ip prefix-list ALLOW_ALL_OUT_PREFIX seq 5 permit 0.0.0.0/0 le 32
ipv6 route vrf clab-mgmt ::/0 Ethernet0/0
ipv6 router ospf 1
 router-id 100.0.254.4
 passive-interface Loopback0
!
!
!
ipv6 prefix-list ALLOW_ALL_V6_IN_PREFIX seq 5 permit ::/0 le 128
!
ipv6 prefix-list ALLOW_ALL_V6_OUT_PREFIX seq 5 permit ::/0 le 128
route-map ALLOW_ALL_V6_IN permit 10 
 match ip address prefix-list ALLOW_ALL_V6_IN_PREFIX
!
route-map ALLOW_ALL_V6_OUT permit 10 
 match ip address prefix-list ALLOW_ALL_V6_OUT_PREFIX
!
route-map ALLOW_ALL_V4_OUT permit 10 
 match ip address prefix-list ALLOW_ALL_OUT_PREFIX
!
route-map ALLOW_ALL_V4_IN permit 10 
 match ip address prefix-list ALLOW_ALL_IN_PREFIX
!
mpls ldp router-id Loopback0 force
!
!
!
control-plane
!
!
!
line con 0
 logging synchronous
line aux 0
line vty 0 4
 login local
 transport input ssh
!
!
!
!
end