!
version 17.12
service timestamps debug datetime msec
service timestamps log datetime msec
!
hostname P1
!
boot-start-marker
boot-end-marker
!
!
vrf definition clab-mgmt
 description clab-mgmt
 !
 address-family ipv4
 exit-address-family
 !
 address-family ipv6
 exit-address-family
!
no aaa new-model
!
!
!
!
!
!
!
!
!
!
!
!
!
no ip domain lookup
ip domain name lab
ip cef
login on-success log
ipv6 unicast-routing
ipv6 cef
!
!
!
!
!
!
!
!
mpls label protocol ldp
multilink bundle-name authenticated
!
!
crypto pki trustpoint TP-self-signed-9
 enrollment selfsigned
 subject-name cn=IOS-Self-Signed-Certificate-9
 revocation-check none
 rsakeypair TP-self-signed-9
 hash sha256
!
!
crypto pki certificate chain TP-self-signed-9
 certificate self-signed 01
  3082031E 30820206 A0030201 02020101 300D0609 2A864886 F70D0101 0B050030 
  28312630 24060355 04030C1D 494F532D 53656C66 2D536967 6E65642D 43657274 
  69666963 6174652D 39301E17 0D323530 37323932 32303031 395A170D 33353037 
  32393232 30303139 5A302831 26302406 03550403 0C1D494F 532D5365 6C662D53 
  69676E65 642D4365 72746966 69636174 652D3930 82012230 0D06092A 864886F7 
  0D010101 05000382 010F0030 82010A02 82010100 B7D22DA9 CF399CE1 B99ECB0F 
  E1AF3244 B0058733 717A9F8E F8910A31 24B65ACA 10C4504A 2A05B4E5 D028983D 
  16382393 473F147E 02CFC72B 7C7B74D8 85E64BB0 34997057 561D5DAD B3781DE2 
  D423FDA7 D8BF9029 91D00553 4127EA32 F3288F40 68DB2EEC 4D97C6B1 9C1183EA 
  58BE334E 692D0382 5CAC9D91 C0EAA6D5 EAD57BB6 CB288A8A 8AAE7A6B E876E762 
  632A6D2B 58E629A9 6EBD701A 03A8D7AF 58E13410 FF088336 9AA63118 B001199C 
  C14304F3 CAE6C40B 12E4A8C1 C654C180 5D0349CF A05C4352 906EF267 E1CDF48E 
  15B2EFB2 028B2F42 C033A9B1 2B6649F8 30D34DDA BB3513E6 EAE3FC71 3A62692C 
  80BE5944 5BCBF7E9 5E9E92AD 8BB2AE7E 451FC379 02030100 01A35330 51301D06 
  03551D0E 04160414 D0992C2A 6D206AB3 A799EF93 B9FD086D 04DF120E 301F0603 
  551D2304 18301680 14D0992C 2A6D206A B3A799EF 93B9FD08 6D04DF12 0E300F06 
  03551D13 0101FF04 05300301 01FF300D 06092A86 4886F70D 01010B05 00038201 
  01005462 23CA475F 4A83A1A4 ED27B510 7AEE9883 A5821C11 666D53D5 B8CBF725 
  8CC99FFB F3624A06 7B10A246 98E328C5 768A6127 A89ADC21 14C4866A 454CD691 
  C1CF51D2 BDD6BCFC F68A09B4 382D1335 0A83846D 268B026E 57768767 1F8B1A4F 
  6E7E5045 C42A024F 232C1346 22C2B10D DE0FAEE3 E1756261 E46C0A91 D8E963BC 
  25989701 BCF962E3 3161F563 82A8FBE0 66EB7D7A 33991523 A1EA168F CB6BFAAB 
  85F929C4 4CCC6AF4 13D51052 BF5160FF 842D55D4 6FB29C1E FAE8B6CD A121E43E 
  4A4C95B0 7E556D49 BB70203F 6C18CD24 574F7439 124B002A 73EC82BE D1149102 
  E334C5CF 0A555750 B51D70FE 723F90DE C144FAF7 E219E18C F585274F 7FE63F27 66F7
  	quit
!
!
memory free low-watermark processor 55011
!
!
spanning-tree mode rapid-pvst
!
!
username admin privilege 15 secret 9 $9$YMji4T302rqlEk$8/V96ezzz3poG/aQH1pTF2x0ZamMDT2eP4s/PjDQbOk
!
!
!
!
!
! 
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
interface Loopback0
 description Protocol Loopback
 ip address 100.0.254.1 255.255.255.255
 ip ospf 1 area 0
 ipv6 address 2001:DB8:100:254::1/128
 ipv6 ospf 1 area 0
!
interface Ethernet0/0
 description MGMT ONLY INTERFACE
 vrf forwarding clab-mgmt
 ip address 192.168.220.2 255.255.255.0
 no cdp enable
!
interface Ethernet0/1
 description To P2-Ethernet0/1
 ip address 100.0.12.1 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 0
 ipv6 address 2001:DB8:100:12::1/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 0
!
interface Ethernet0/2
 description To P3-Ethernet0/2
 ip address 100.0.13.1 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 0
 ipv6 address 2001:DB8:100:13::1/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 0
!
interface Ethernet0/3
 description To RR1-Ethernet0/1
 ip address 100.0.101.1 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 10
 ipv6 address 2001:DB8:100:101::1/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 10
!
interface Ethernet1/0
 description To PE1-Ethernet0/1
 ip address 100.0.11.1 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 1
 ipv6 address 2001:DB8:100:11::1/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 1
!
interface Ethernet1/1
 no ip address
 shutdown
!
interface Ethernet1/2
 no ip address
 shutdown
!
interface Ethernet1/3
 no ip address
 shutdown
!
router ospf 1
 router-id 100.0.254.1
 passive-interface Loopback0
!
router bgp 65000
 bgp log-neighbor-changes
 no bgp default ipv4-unicast
 neighbor BACKBONE-RR-IPV4-PEERS peer-group
 neighbor BACKBONE-RR-IPV4-PEERS remote-as 65000
 neighbor BACKBONE-RR-IPV6-PEERS peer-group
 neighbor BACKBONE-RR-IPV6-PEERS remote-as 65000
 neighbor 2001:DB8:100:254::5 peer-group BACKBONE-RR-IPV6-PEERS
 neighbor 2001:DB8:100:254::5 description RR1_Loopback0
 neighbor 2001:DB8:100:254::5 update-source Loopback0
 neighbor 100.0.254.5 peer-group BACKBONE-RR-IPV4-PEERS
 neighbor 100.0.254.5 description RR1_Loopback0
 neighbor 100.0.254.5 update-source Loopback0
 !
 address-family ipv4
  neighbor BACKBONE-RR-IPV4-PEERS send-community both
  neighbor BACKBONE-RR-IPV4-PEERS route-map ALLOW_ALL_V4_IN in
  neighbor BACKBONE-RR-IPV4-PEERS route-map ALLOW_ALL_V4_OUT out
  neighbor 100.0.254.5 activate
 exit-address-family
 !
 address-family ipv6
  neighbor BACKBONE-RR-IPV6-PEERS send-community both
  neighbor BACKBONE-RR-IPV6-PEERS route-map ALLOW_ALL_V6_IN in
  neighbor BACKBONE-RR-IPV6-PEERS route-map ALLOW_ALL_V6_OUT out
  neighbor 2001:DB8:100:254::5 activate
 exit-address-family
!
ip forward-protocol nd
!
!
ip http server
ip http secure-server
ip route vrf clab-mgmt 0.0.0.0 0.0.0.0 Ethernet0/0 192.168.220.1
ip ssh bulk-mode 131072
!
!
ip prefix-list ALLOW_ALL_IN_PREFIX seq 5 permit 0.0.0.0/0 le 32
!
ip prefix-list ALLOW_ALL_OUT_PREFIX seq 5 permit 0.0.0.0/0 le 32
ipv6 route vrf clab-mgmt ::/0 Ethernet0/0
ipv6 router ospf 1
 router-id 100.0.254.1
 passive-interface Loopback0
!
!
!
ipv6 prefix-list ALLOW_ALL_V6_IN_PREFIX seq 5 permit ::/0 le 128
!
ipv6 prefix-list ALLOW_ALL_V6_OUT_PREFIX seq 5 permit ::/0 le 128
route-map ALLOW_ALL_V6_IN permit 10 
 match ip address prefix-list ALLOW_ALL_V6_IN_PREFIX
!
route-map ALLOW_ALL_V6_OUT permit 10 
 match ip address prefix-list ALLOW_ALL_V6_OUT_PREFIX
!
route-map ALLOW_ALL_V4_OUT permit 10 
 match ip address prefix-list ALLOW_ALL_OUT_PREFIX
!
route-map ALLOW_ALL_V4_IN permit 10 
 match ip address prefix-list ALLOW_ALL_IN_PREFIX
!
mpls ldp router-id Loopback0 force
!
!
!
control-plane
!
!
!
line con 0
 logging synchronous
line aux 0
line vty 0 4
 login local
 transport input ssh
!
!
!
!
end