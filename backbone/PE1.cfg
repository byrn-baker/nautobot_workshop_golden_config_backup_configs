!

!
version 17.12
service timestamps debug datetime msec
service timestamps log datetime msec
!
hostname PE1
!
boot-start-marker
boot-end-marker
!
!
vrf definition clab-mgmt
 description clab-mgmt
 !
 address-family ipv4
 exit-address-family
 !
 address-family ipv6
 exit-address-family
!
no aaa new-model
!
!
!
!
!
!
!
!
!
!
!
!
!
no ip domain lookup
ip domain name lab
ip cef
login on-success log
ipv6 unicast-routing
ipv6 cef
!
!
!
!
!
!
!
!
mpls label protocol ldp
multilink bundle-name authenticated
!
!
crypto pki trustpoint TP-self-signed-13
 enrollment selfsigned
 subject-name cn=IOS-Self-Signed-Certificate-13
 revocation-check none
 rsakeypair TP-self-signed-13
 hash sha256
!
!
crypto pki certificate chain TP-self-signed-13
 certificate self-signed 01
  30820320 30820208 A0030201 02020101 300D0609 2A864886 F70D0101 0B050030 
  29312730 25060355 04030C1E 494F532D 53656C66 2D536967 6E65642D 43657274 
  69666963 6174652D 3133301E 170D3235 30373239 32323030 32305A17 0D333530 
  37323932 32303032 305A3029 31273025 06035504 030C1E49 4F532D53 656C662D 
  5369676E 65642D43 65727469 66696361 74652D31 33308201 22300D06 092A8648 
  86F70D01 01010500 0382010F 00308201 0A028201 0100B468 8EE3D9CD 610D2A1C 
  FA1B08A5 5536ECB3 6CC733BA CFB57B00 20FEEAAC 420DD348 F2D57CF6 56C3FF75 
  F0F35AE1 FB076980 E2E61210 DB2FCCBB A63613A9 9F76B997 85ABB5B3 144640B3 
  4EA63326 3B599E8C 769B9C48 5BA6D583 06A9F9A8 F5B82835 77FE8A7E 1F79A30D 
  9F10E8E8 1D1F3B8F 02B48792 8E6413F5 A38A767E 64C18851 73C59B52 617629F8 
  4B53E39B BB0D339A 7193BAC6 709D163D BB0C18B0 04D5698B 760211DF C4877247 
  0FAE1F70 113C6468 A5140AC2 884053FE D9F35FF6 AFA8CA8B CBBA2ABE 32E08F13 
  C033D773 71D71584 8E8A4A69 B15DCAE8 D702A7D9 28921BDC 9B9DD70F D3F79A95 
  E4606A29 23DC51D7 BFCCA79D 3B31720E 96842FD0 339F0203 010001A3 53305130 
  1D060355 1D0E0416 04142AB4 4BF212B8 48D07C8E C5CCDA84 8ED8CA16 E39C301F 
  0603551D 23041830 1680142A B44BF212 B848D07C 8EC5CCDA 848ED8CA 16E39C30 
  0F060355 1D130101 FF040530 030101FF 300D0609 2A864886 F70D0101 0B050003 
  82010100 0FDD01B7 58F61A16 1C1F1AA5 77D4B9AE F0E7E89F 7892BD99 E2CB5535 
  291348BF D5441949 6F7D0A94 9B2B1853 816EFCB1 FB4507E5 F63A60B3 BD0460BA 
  423E7758 D40017DD 0D6E9F35 183482C9 9E799CB4 AFC54191 76FA086E 44705B76 
  839454FB F0D3BB48 7DEBBB5F FF98F4F2 334DB128 323E9895 A3AE393D 7EA0A321 
  03682141 F0B93F26 73897BA1 64326CD9 56E00193 7AA90C30 3CA36887 6363D179 
  0634B3E7 062A69BC A5BD4A69 01AEACAC 75F1E9E0 12897E9C 4118B32F 1DDE4D8E 
  9CFC81F4 B35FF062 126ABAC8 F8C91175 C4034E40 298D11D3 36682B8D 74A597C4 
  11E8F831 78F88FCC FFFA21B5 33BB91F8 8D9E2F81 3C7C6449 5AB79ABF 11E90A45 83C73BC3
  	quit
!
!
memory free low-watermark processor 55011
!
!
spanning-tree mode rapid-pvst
!
!
username admin privilege 15 secret 9 $9$YMji4T302rqlEk$8/V96ezzz3poG/aQH1pTF2x0ZamMDT2eP4s/PjDQbOk
!
!
!
!
!
! 
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
interface Loopback0
 description Protocol Loopback
 ip address 100.0.254.11 255.255.255.255
 ip ospf 1 area 1
 ipv6 address 2001:DB8:100:254::11/128
 ipv6 ospf 1 area 1
!
interface Ethernet0/0
 description MGMT ONLY INTERFACE
 vrf forwarding clab-mgmt
 ip address 192.168.220.6 255.255.255.0
 no cdp enable
!
interface Ethernet0/1
 description To P1-Ethernet1/0
 ip address 100.0.11.11 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 1
 ipv6 address 2001:DB8:100:11::11/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 1
!
interface Ethernet0/2
 description To P3-Ethernet0/3
 ip address 100.0.31.11 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 1
 ipv6 address 2001:DB8:100:31::11/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 1
!
interface Ethernet0/3
 description To CE1-Ethernet0/1
 ip address 100.0.111.1 255.255.255.0
 ipv6 address 2001:DB8:100:111::1/64
 ipv6 enable
!
router ospf 1
 router-id 100.0.254.11
 passive-interface Loopback0
!
router bgp 65000
 bgp log-neighbor-changes
 no bgp default ipv4-unicast
 neighbor BACKBONE-RR-IPV4-PEERS peer-group
 neighbor BACKBONE-RR-IPV4-PEERS remote-as 65000
 neighbor BACKBONE-RR-IPV6-PEERS peer-group
 neighbor BACKBONE-RR-IPV6-PEERS remote-as 65000
 neighbor CUSTOMER-PEERS-V4 peer-group
 neighbor CUSTOMER-PEERS-V4 remote-as 65200
 neighbor CUSTOMER-PEERS-V6 peer-group
 neighbor CUSTOMER-PEERS-V6 remote-as 65200
 neighbor 2001:DB8:100:111::2 remote-as 65200
 neighbor 2001:DB8:100:111::2 peer-group CUSTOMER-PEERS-V6
 neighbor 2001:DB8:100:111::2 description CE1_Ethernet0/1
 neighbor 2001:DB8:100:254::5 peer-group BACKBONE-RR-IPV6-PEERS
 neighbor 2001:DB8:100:254::5 description RR1_Loopback0
 neighbor 2001:DB8:100:254::5 update-source Loopback0
 neighbor 100.0.111.2 remote-as 65200
 neighbor 100.0.111.2 peer-group CUSTOMER-PEERS-V4
 neighbor 100.0.111.2 description CE1_Ethernet0/1
 neighbor 100.0.254.5 peer-group BACKBONE-RR-IPV4-PEERS
 neighbor 100.0.254.5 description RR1_Loopback0
 neighbor 100.0.254.5 update-source Loopback0
 !
 address-family ipv4
  neighbor BACKBONE-RR-IPV4-PEERS send-community both
  neighbor BACKBONE-RR-IPV4-PEERS next-hop-self
  neighbor BACKBONE-RR-IPV4-PEERS route-map ALLOW_ALL_V4_IN in
  neighbor BACKBONE-RR-IPV4-PEERS route-map ALLOW_ALL_V4_OUT out
  neighbor CUSTOMER-PEERS-V4 route-map ALLOW_ALL_V4_IN in
  neighbor CUSTOMER-PEERS-V4 route-map ALLOW_ALL_V4_OUT out
  neighbor 100.0.111.2 activate
  neighbor 100.0.254.5 activate
 exit-address-family
 !
 address-family ipv6
  neighbor BACKBONE-RR-IPV6-PEERS send-community both
  neighbor BACKBONE-RR-IPV6-PEERS next-hop-self
  neighbor BACKBONE-RR-IPV6-PEERS route-map ALLOW_ALL_V6_IN in
  neighbor BACKBONE-RR-IPV6-PEERS route-map ALLOW_ALL_V6_OUT out
  neighbor CUSTOMER-PEERS-V6 route-map ALLOW_ALL_V6_IN in
  neighbor CUSTOMER-PEERS-V6 route-map ALLOW_ALL_V6_OUT out
  neighbor 2001:DB8:100:111::2 activate
  neighbor 2001:DB8:100:254::5 activate
 exit-address-family
!
ip forward-protocol nd
!
!
ip http server
ip http secure-server
ip route vrf clab-mgmt 0.0.0.0 0.0.0.0 Ethernet0/0 192.168.220.1
ip ssh bulk-mode 131072
!
!
ip prefix-list ALLOW_ALL_IN_PREFIX seq 5 permit 0.0.0.0/0 le 32
!
ip prefix-list ALLOW_ALL_OUT_PREFIX seq 5 permit 0.0.0.0/0 le 32
ipv6 route vrf clab-mgmt ::/0 Ethernet0/0
ipv6 router ospf 1
 router-id 100.0.254.11
 passive-interface Loopback0
!
!
!
ipv6 prefix-list ALLOW_ALL_V6_IN_PREFIX seq 5 permit ::/0 le 128
!
ipv6 prefix-list ALLOW_ALL_V6_OUT_PREFIX seq 5 permit ::/0 le 128
route-map ALLOW_ALL_V6_IN permit 10 
 match ip address prefix-list ALLOW_ALL_V6_IN_PREFIX
!
route-map ALLOW_ALL_V6_OUT permit 10 
 match ip address prefix-list ALLOW_ALL_V6_OUT_PREFIX
!
route-map ALLOW_ALL_V4_OUT permit 10 
 match ip address prefix-list ALLOW_ALL_OUT_PREFIX
!
route-map ALLOW_ALL_V4_IN permit 10 
 match ip address prefix-list ALLOW_ALL_IN_PREFIX
!
mpls ldp router-id Loopback0 force
!
!
!
control-plane
!
!
!
line con 0
 logging synchronous
line aux 0
line vty 0 4
 login local
 transport input ssh
!
!
!
!
end