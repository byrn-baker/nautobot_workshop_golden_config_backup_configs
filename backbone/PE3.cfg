!

!
version 17.12
service timestamps debug datetime msec
service timestamps log datetime msec
!
hostname PE3
!
boot-start-marker
boot-end-marker
!
!
vrf definition clab-mgmt
 description clab-mgmt
 !
 address-family ipv4
 exit-address-family
 !
 address-family ipv6
 exit-address-family
!
no aaa new-model
!
!
!
!
!
!
!
!
!
!
!
!
!
no ip domain lookup
ip domain name lab
ip cef
login on-success log
ipv6 unicast-routing
ipv6 cef
!
!
!
!
!
!
!
!
mpls label protocol ldp
multilink bundle-name authenticated
!
!
crypto pki trustpoint TP-self-signed-15
 enrollment selfsigned
 subject-name cn=IOS-Self-Signed-Certificate-15
 revocation-check none
 rsakeypair TP-self-signed-15
 hash sha256
!
!
crypto pki certificate chain TP-self-signed-15
 certificate self-signed 01
  30820320 30820208 A0030201 02020101 300D0609 2A864886 F70D0101 0B050030 
  29312730 25060355 04030C1E 494F532D 53656C66 2D536967 6E65642D 43657274 
  69666963 6174652D 3135301E 170D3235 30373239 32323030 32315A17 0D333530 
  37323932 32303032 315A3029 31273025 06035504 030C1E49 4F532D53 656C662D 
  5369676E 65642D43 65727469 66696361 74652D31 35308201 22300D06 092A8648 
  86F70D01 01010500 0382010F 00308201 0A028201 0100BDC1 F5CE1B9F E291778D 
  BFB7D7A0 6CE2631F 07F0D993 F39FD1FA EB9611DF 852AA3B5 9409B4D2 8D347F21 
  D1D0F7FD 47AB54FA 3BD181F6 AE6B1221 26938E72 AA9CF00B FB3A4F85 249071E3 
  EE38994B D050DEDE 1C60046A 3DEB0D19 2CF8CE72 9C59AE3B 45B59FA5 45A1295D 
  07651F74 30BE0DA3 CDCD0373 CB9F1025 BA0DBDC4 8F33619E FA18A435 A3998686 
  313C26FC 4224A663 7A6DEC43 ED390FFD F6268699 52A66945 8BA196E3 59261412 
  888FE596 5CD5C32A 5BB91846 40D03E0C FC51AE58 765447C3 2949E1B0 A5694176 
  F6A35837 EC870C99 A00FF74C 034E00CA B3BFC7C7 0D404289 3D93AF95 E41303EB 
  36BEF1D5 9B5E2CED B0331679 F4B7DD04 A356285C 29350203 010001A3 53305130 
  1D060355 1D0E0416 04148C6F E6A0CCC6 62001E3E 717F6AC4 91E63E14 525E301F 
  0603551D 23041830 1680148C 6FE6A0CC C662001E 3E717F6A C491E63E 14525E30 
  0F060355 1D130101 FF040530 030101FF 300D0609 2A864886 F70D0101 0B050003 
  82010100 1CF34935 86C5628F CE504C1D 14D2E167 0E6837E2 73882728 6F90DDEA 
  76D906B4 3734A35A 4F8131CF 11157060 87EBFFD7 57807CC0 A2545F7F 0FE0B308 
  7D55444E 1D5FFDFB 7E7C94F5 CF8D5C7B BC0D7ED0 D1995113 FEA7C040 E07193F8 
  073D993D 3C8A4E94 A682F87D 23E9C519 81481CA2 196F288C D184AFA3 16F7B674 
  B17AE7DD 055D9522 38546303 AB9A4446 939D5FD2 25EEEAD9 FB3F8D4B C3F241B2 
  2A9C99C7 D3889A1C 7FC8F027 3DCAA3D1 DE49EE6C 5D9FBEE4 0252B8BA F175350B 
  6AF9B385 F60ECE11 7728CB69 A4E1709C 6C9695AB 18D59E3D 82BFE612 F039D6CA 
  3B0E7D04 7DE1AC7E 1C657C1A C81D8E25 70CB8DE0 5BD89D79 76566AF7 E3DEBC0C 93E956BF
  	quit
!
!
memory free low-watermark processor 55011
!
!
spanning-tree mode rapid-pvst
!
!
username admin privilege 15 secret 9 $9$YMji4T302rqlEk$8/V96ezzz3poG/aQH1pTF2x0ZamMDT2eP4s/PjDQbOk
!
!
!
!
!
! 
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
interface Loopback0
 description Protocol Loopback
 ip address 100.0.254.13 255.255.255.255
 ip ospf 1 area 3
 ipv6 address 2001:DB8:100:254::13/128
 ipv6 ospf 1 area 3
!
interface Ethernet0/0
 description MGMT ONLY INTERFACE
 vrf forwarding clab-mgmt
 ip address 192.168.220.8 255.255.255.0
 no cdp enable
!
interface Ethernet0/1
 description To P2-Ethernet1/0
 ip address 100.0.22.12 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 3
 ipv6 address 2001:DB8:100:22::12/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 3
!
interface Ethernet0/2
 description To P4-Ethernet1/0
 ip address 100.0.43.43 255.255.255.0
 ip ospf network point-to-point
 ip ospf 1 area 3
 ipv6 address 2001:DB8:100:43::43/64
 ipv6 enable
 mpls ip
 ipv6 ospf 1 area 3
!
interface Ethernet0/3
 description To CE2-Ethernet0/1
 ip address 100.0.222.1 255.255.255.0
 ipv6 address 2001:DB8:100:222::1/64
 ipv6 enable
!
router ospf 1
 router-id 100.0.254.13
 passive-interface Loopback0
!
router bgp 65000
 bgp log-neighbor-changes
 no bgp default ipv4-unicast
 neighbor BACKBONE-RR-IPV4-PEERS peer-group
 neighbor BACKBONE-RR-IPV4-PEERS remote-as 65000
 neighbor BACKBONE-RR-IPV6-PEERS peer-group
 neighbor BACKBONE-RR-IPV6-PEERS remote-as 65000
 neighbor CUSTOMER-PEERS-V4 peer-group
 neighbor CUSTOMER-PEERS-V4 remote-as 65100
 neighbor CUSTOMER-PEERS-V6 peer-group
 neighbor CUSTOMER-PEERS-V6 remote-as 65100
 neighbor 2001:DB8:100:222::2 peer-group CUSTOMER-PEERS-V6
 neighbor 2001:DB8:100:222::2 description CE2_Ethernet0/1
 neighbor 2001:DB8:100:254::5 peer-group BACKBONE-RR-IPV6-PEERS
 neighbor 2001:DB8:100:254::5 description RR1_Loopback0
 neighbor 2001:DB8:100:254::5 update-source Loopback0
 neighbor 100.0.222.2 peer-group CUSTOMER-PEERS-V4
 neighbor 100.0.222.2 description CE2_Ethernet0/1
 neighbor 100.0.254.5 peer-group BACKBONE-RR-IPV4-PEERS
 neighbor 100.0.254.5 description RR1_Loopback0
 neighbor 100.0.254.5 update-source Loopback0
 !
 address-family ipv4
  neighbor BACKBONE-RR-IPV4-PEERS send-community both
  neighbor BACKBONE-RR-IPV4-PEERS next-hop-self
  neighbor BACKBONE-RR-IPV4-PEERS route-map ALLOW_ALL_V4_IN in
  neighbor BACKBONE-RR-IPV4-PEERS route-map ALLOW_ALL_V4_OUT out
  neighbor CUSTOMER-PEERS-V4 route-map ALLOW_ALL_V4_IN in
  neighbor CUSTOMER-PEERS-V4 route-map ALLOW_ALL_V4_OUT out
  neighbor 100.0.222.2 activate
  neighbor 100.0.254.5 activate
 exit-address-family
 !
 address-family ipv6
  neighbor BACKBONE-RR-IPV6-PEERS send-community both
  neighbor BACKBONE-RR-IPV6-PEERS next-hop-self
  neighbor BACKBONE-RR-IPV6-PEERS route-map ALLOW_ALL_V6_IN in
  neighbor BACKBONE-RR-IPV6-PEERS route-map ALLOW_ALL_V6_OUT out
  neighbor CUSTOMER-PEERS-V6 route-map ALLOW_ALL_V6_IN in
  neighbor CUSTOMER-PEERS-V6 route-map ALLOW_ALL_V6_OUT out
  neighbor 2001:DB8:100:222::2 activate
  neighbor 2001:DB8:100:254::5 activate
 exit-address-family
!
ip forward-protocol nd
!
!
ip http server
ip http secure-server
ip route vrf clab-mgmt 0.0.0.0 0.0.0.0 Ethernet0/0 192.168.220.1
ip ssh bulk-mode 131072
!
!
ip prefix-list ALLOW_ALL_IN_PREFIX seq 5 permit 0.0.0.0/0 le 32
!
ip prefix-list ALLOW_ALL_OUT_PREFIX seq 5 permit 0.0.0.0/0 le 32
ipv6 route vrf clab-mgmt ::/0 Ethernet0/0
ipv6 router ospf 1
 router-id 100.0.254.13
 passive-interface Loopback0
!
!
!
ipv6 prefix-list ALLOW_ALL_V6_IN_PREFIX seq 5 permit ::/0 le 128
!
ipv6 prefix-list ALLOW_ALL_V6_OUT_PREFIX seq 5 permit ::/0 le 128
route-map ALLOW_ALL_V6_IN permit 10 
 match ip address prefix-list ALLOW_ALL_V6_IN_PREFIX
!
route-map ALLOW_ALL_V6_OUT permit 10 
 match ip address prefix-list ALLOW_ALL_V6_OUT_PREFIX
!
route-map ALLOW_ALL_V4_OUT permit 10 
 match ip address prefix-list ALLOW_ALL_OUT_PREFIX
!
route-map ALLOW_ALL_V4_IN permit 10 
 match ip address prefix-list ALLOW_ALL_IN_PREFIX
!
mpls ldp router-id Loopback0 force
!
!
!
control-plane
!
!
!
line con 0
 logging synchronous
line aux 0
line vty 0 4
 login local
 transport input ssh
!
!
!
!
end